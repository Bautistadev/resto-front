<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <div class="container-fluid" style="text-align:center;">
      <div class="row">
        <div class="col-sm-1">
          <ion-button (click)="redirigir('inicio')" class="form-control" color="primary" style="display: inline-block;margin: 5px;">Inicio</ion-button>
        </div>
        <div class="col-sm-2">
          <ion-button (click)="redirigir('empleados')" class="form-control" color="primary" style="display: inline-block;margin: 5px;">Empleados</ion-button>
        </div>
        <div class="col-sm-2">
          <ion-button class="form-control" (click)="redirigir('mesas')"color="primary">Messas</ion-button>
        </div>
        <div class="col-sm-2">
          <ion-button class="form-control" (click)="redirigir('pizzas')" color="primary">Pizzas</ion-button>
        </div>
        <div class="col-sm-2">
          <ion-button class="form-control" (click)="redirigir('geolocalizacion')" color="primary">Geolocalizacion</ion-button>
        </div>
        <div class="col-sm-2">
          <ion-button class="form-control" color="primary">Ordenes</ion-button>
        </div>
        <div class="col-sm-1">
          <ion-button class="form-control" color="primary">Salir</ion-button>
        </div>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" >
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Empleados</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="container-fluid" style="margin-top: 20px;">
    <ion-accordion-group>
      <ion-accordion value="Nuevo">
        <ion-item slot="header" color="primary">
          <ion-label>Nuevo empleado</ion-label>
        </ion-item>
        <div class="ion-padding" slot="content">
          <form [formGroup]="formularioNewEmployed">
          <div class="container-fluid">
            <div class="row">

                <div class="col-sm-4" style="margin-top: 10px;">
                  <ion-input  formControlName="userName" label="Nombre de usuario" label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>
                <div class="col-sm-4" style="margin-top: 10px;">
                  <ion-input formControlName="nombre" label="Nombre" label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>
                <div class="col-sm-4" style="margin-top: 10px;">
                  <ion-input label="Apellido" formControlName="apellido"label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>
                <div class="col-sm-4" style="margin-top: 10px;">
                  <ion-input label="Dni" formControlName="dni" type="number" label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>
                <div class="col-sm-2" style="margin-top: 10px;">
                  <ion-input label="Password" type="password" formControlName="password" label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>
                <div class="col-sm-2" style="margin-top: 10px;">
                  <ion-input label="Confirm password" type="password" formControlName="confirmPassword" label-placement="floating" fill="solid" placeholder="Enter text" required></ion-input>
                </div>

                <div class="col-sm-4" style="margin-top: 10px;">
                  <ion-list>
                    <ion-item>
                      <ion-select  formControlName="rol" aria-label="rols" interface="popover" placeholder="Select fruit">
                        <ion-select-option value="1">ADMIN</ion-select-option>
                        <ion-select-option value="2">USER</ion-select-option>

                      </ion-select>
                    </ion-item>
                  </ion-list>
                </div>


              <div class="col-sm-12" style="margin-top: 10px;">
                <ion-button expand="block" (click)="saveEmployed()">Cargar</ion-button>
              </div>

            </div>
          </div>
        </form>
        </div>
      </ion-accordion>
    </ion-accordion-group>
  </div>

  <div class="container-fluid" style="margin-top: 20px;">
    <table class="table" style="text-align: center;">
      <thead class="bg-primary">
        <tr>
          <th>Usuario</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Documento</th>
          <th>Rol</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>

          <tr *ngFor="let item of users">
            <td>{{ item.userName }}</td>
            <td>{{ item.nombre }}</td>
            <td>{{ item.apellido }}</td>
            <td>{{ item.dni }}</td>
            <td>{{ item.rol.rol }}</td>
            <td><button class="btn btn-success" (click)="setModalUpdateOpen(item,'info')" >Info</button><button class="btn btn-warning" (click)="setModalUpdateOpen(item,'update')">Modificar</button> <button class="btn btn-danger">Eliminar</button></td>
          </tr>

      </tbody>
    </table>
  </div>

  <ion-alert
  [isOpen]="isAlertOpen"
  header="Success"
  subHeader="Important message"
  message="Empleado guardado!!"
  value="alertButtons"
  (didDismiss)="setOpenAlert(false)"
></ion-alert>

<ion-modal #modal [isOpen]="isModalUpdateOpen" backdropDismiss="false">
  <ng-template>
    <!--CABEZA DEL MODAL-->
    <ion-header>
      <ion-toolbar>
        <ion-title>Informaci√≥n</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="setModalUpdateClose()"><ion-icon name="close-outline"></ion-icon></ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <!--CUERPO DEL MODAL-->
    <ion-content *ngIf="crudOperation == 'info'" class="ion-padding">
      <p  id="lblNombre" >Usuario: {{selectedUser?.userName}}</p>
      <p  id="lblNombre" >Nombre: {{selectedUser?.nombre}}</p>
      <p  id="lblApellido" >Apellido: {{selectedUser?.apellido}}</p>
      <p  id="lblEmail" >Documento: {{selectedUser?.dni}}</p>
      <p  id="lblEmail" >Rol: {{selectedUser?.rol?.rol}}</p>

    </ion-content>
    <ion-content *ngIf="crudOperation == 'update'" class="ion-padding" >
      <form [formGroup]="formularioNewEmployed">
        <div class="container-fluid">
          <div class="row">

              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input formControlName="userName" label="Nombre de usuario"  label-placement="floating" fill="solid" placeholder="Enter text" [(ngModel)]="selectedUser.userName"required ></ion-input>
              </div>
              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input formControlName="nombre" label="Nombre" label-placement="floating" fill="solid" placeholder="Enter text"  [(ngModel)]="selectedUser.nombre"required></ion-input>
              </div>
              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input label="Apellido" formControlName="apellido"label-placement="floating" fill="solid" placeholder="Enter text" [(ngModel)]="selectedUser.apellido" required></ion-input>
              </div>
              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input label="Dni" formControlName="dni" type="number" label-placement="floating" fill="solid" placeholder="Enter text" [(ngModel)]="selectedUser.dni"required></ion-input>
              </div>
              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input label="Password" type="password" formControlName="password" label-placement="floating" fill="solid" placeholder="Enter text" required>*****</ion-input>
              </div>
              <div class="col-sm-6" style="margin-top: 10px;">
                <ion-input label="Confirm password" type="password" formControlName="confirmPassword" label-placement="floating" fill="solid" placeholder="Enter text" required>****</ion-input>
              </div>

              <div class="col-sm-12" style="margin-top: 10px;">
                <ion-list>
                  <ion-item >
                    <ion-select  formControlName="rol" aria-label="rols" interface="popover" placeholder="Select fruit">
                      <ion-select-option value="1" default >ADMIN</ion-select-option>
                      <ion-select-option value="2">USER</ion-select-option>

                    </ion-select>
                  </ion-item>
                </ion-list>
              </div>


            <div class="col-sm-12" style="margin-top: 10px;">
              <ion-button expand="block" (click)="updateEmployed()">Cargar</ion-button>
            </div>

          </div>
        </div>
      </form>

    </ion-content>
  </ng-template>
</ion-modal>

</ion-content>
